<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wellspring Health ‚Äî Demo</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --primary: #4a7c8f;
            --primary-dark: #2f5a6b;
            --accent: #d4a574;
            --text: #1a1a1a;
            --text-light: #5a5a5a;
            --bg-light: #f5f7f9;
            --border: #dde4e9;
        }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif; line-height: 1.7; color: var(--text); }
        .demo-banner { position: fixed; top: 0; left: 50%; transform: translateX(-50%); background: linear-gradient(135deg, #4a7c8f 0%, #6b9aaa 100%); color: white; padding: 10px 24px; font-size: 13px; z-index: 9998; border-radius: 0 0 12px 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); font-weight: 500; }
        header { background: white; border-bottom: 2px solid var(--bg-light); padding: 24px 0; position: sticky; top: 0; z-index: 100; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .header-content { max-width: 1100px; margin: 0 auto; padding: 0 24px; display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 26px; font-weight: 700; color: var(--primary); text-decoration: none; display: flex; align-items: center; gap: 8px; }
        .logo-icon { width: 32px; height: 32px; background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%); border-radius: 8px; }
        .header-cta { background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%); color: white; padding: 12px 28px; border-radius: 8px; text-decoration: none; font-weight: 600; box-shadow: 0 4px 12px rgba(74, 124, 143, 0.3); }
        .hero { background: linear-gradient(135deg, var(--bg-light) 0%, #e8f0f4 100%); padding: 100px 24px 80px; text-align: center; }
        .hero-badge { display: inline-block; background: white; padding: 8px 20px; border-radius: 20px; font-size: 13px; font-weight: 600; color: var(--primary); margin-bottom: 24px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); }
        .hero h1 { font-size: clamp(36px, 5.5vw, 56px); font-weight: 700; margin-bottom: 20px; line-height: 1.15; }
        .hero-highlight { color: var(--primary); }
        .hero p { font-size: clamp(17px, 2.2vw, 21px); color: var(--text-light); margin-bottom: 36px; }
        .hero-cta { display: inline-block; background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%); color: white; padding: 18px 44px; border-radius: 10px; text-decoration: none; font-weight: 700; box-shadow: 0 6px 20px rgba(74, 124, 143, 0.3); }
        .section { max-width: 1100px; margin: 0 auto; padding: 80px 24px; }
        .section-alt { background: white; }
        .section h2 { font-size: clamp(30px, 4.5vw, 42px); font-weight: 700; text-align: center; margin-bottom: 48px; }
        .services-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 20px; }
        .service-card { background: linear-gradient(135deg, #f8fafb 0%, white 100%); padding: 28px; border-radius: 14px; border: 2px solid var(--border); text-align: center; }
        .service-card h3 { font-size: 17px; font-weight: 700; color: var(--primary); }
        .philosophy-section { background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 100%); color: white; padding: 100px 24px; text-align: center; }
        .philosophy-quote { font-size: clamp(32px, 5vw, 48px); font-weight: 300; margin-bottom: 24px; font-style: italic; }
        .info-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 32px; margin-top: 48px; }
        .info-card { background: white; padding: 36px; border-radius: 16px; border-left: 4px solid var(--primary); box-shadow: 0 4px 12px rgba(0,0,0,0.08); }
        .info-card h3 { font-size: 20px; font-weight: 700; color: var(--primary); margin-bottom: 20px; }
        .info-card p { font-size: 15px; margin-bottom: 10px; text-align: left; }
        .info-card a { color: var(--primary); text-decoration: none; font-weight: 600; }
        footer { background: #1a2430; color: rgba(255,255,255,0.75); padding: 50px 24px; text-align: center; font-size: 14px; }
        
        /* CHAT */
        .chat-launcher { position: fixed; bottom: 28px; right: 28px; width: 68px; height: 68px; background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%); border-radius: 50%; box-shadow: 0 6px 24px rgba(74, 124, 143, 0.4); cursor: pointer; border: none; z-index: 9999; display: flex; align-items: center; justify-content: center; }
        .chat-launcher svg { width: 34px; height: 34px; fill: white; }
        .chat-launcher.pulse { animation: pulse 2s infinite; }
        @keyframes pulse {
            0%, 100% { box-shadow: 0 6px 24px rgba(74, 124, 143, 0.4); }
            50% { box-shadow: 0 6px 24px rgba(74, 124, 143, 0.8), 0 0 0 15px rgba(74, 124, 143, 0.1); }
        }
        
        /* Chat notification bubble for mobile */
        .chat-notification {
            position: fixed;
            bottom: 110px;
            right: 28px;
            background: white;
            padding: 16px 20px;
            border-radius: 18px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.2);
            max-width: 280px;
            z-index: 9998;
            display: none;
            animation: slideInBounce 0.5s ease-out;
        }
        
        @keyframes slideInBounce {
            0% { opacity: 0; transform: translateY(20px) scale(0.8); }
            60% { transform: translateY(-5px) scale(1.02); }
            100% { opacity: 1; transform: translateY(0) scale(1); }
        }
        
        .chat-notification.show {
            display: block;
        }
        
        .chat-notification-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .chat-notification-title {
            font-size: 14px;
            font-weight: 700;
            color: var(--primary);
        }
        
        .chat-notification-close {
            background: none;
            border: none;
            color: var(--text-light);
            font-size: 20px;
            cursor: pointer;
            padding: 0;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
        }
        
        .chat-notification-close:hover {
            background: var(--bg-light);
        }
        
        .chat-notification-body {
            font-size: 13px;
            color: var(--text);
            line-height: 1.5;
            margin-bottom: 12px;
        }
        
        .chat-notification-btn {
            width: 100%;
            padding: 10px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            font-size: 13px;
            cursor: pointer;
        }
        
        .chat-panel { position: fixed; bottom: 110px; right: 28px; width: 400px; height: 600px; background: white; border-radius: 20px; box-shadow: 0 12px 48px rgba(0,0,0,0.25); display: none; flex-direction: column; z-index: 9999; }
        .chat-panel.open { display: flex; }
        @media (max-width: 480px) { 
            .chat-panel { 
                bottom: 0; 
                right: 0; 
                left: 0; 
                width: 100%; 
                height: 100%; 
                border-radius: 0; 
            }
            .chat-notification {
                right: 20px;
                bottom: 100px;
                max-width: calc(100vw - 110px);
            }
            .chat-launcher {
                bottom: 20px;
                right: 20px;
            }
        }
        .chat-header { background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%); color: white; padding: 24px; display: flex; justify-content: space-between; border-radius: 20px 20px 0 0; }
        .chat-close { background: rgba(255,255,255,0.15); border: none; color: white; font-size: 22px; cursor: pointer; width: 36px; height: 36px; border-radius: 8px; }
        .chat-messages { flex: 1; padding: 20px; overflow-y: auto; background: #f8fafb; }
        .chat-message { margin-bottom: 18px; display: flex; }
        .chat-message.bot { justify-content: flex-start; }
        .chat-message.user { justify-content: flex-end; }
        .message-bubble { max-width: 82%; padding: 13px 18px; border-radius: 18px; font-size: 14px; line-height: 1.6; }
        .chat-message.bot .message-bubble { background: white; border-bottom-left-radius: 6px; box-shadow: 0 2px 6px rgba(0,0,0,0.08); }
        .chat-message.user .message-bubble { background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%); color: white; border-bottom-right-radius: 6px; }
        .message-cta { display: inline-block; margin-top: 10px; padding: 10px 18px; background: var(--primary); color: white; border-radius: 18px; font-size: 13px; cursor: pointer; border: none; font-family: inherit; font-weight: 700; }
        .quick-replies { padding: 14px 20px; background: white; border-top: 1px solid var(--border); display: flex; flex-wrap: wrap; gap: 8px; }
        .quick-reply-btn { padding: 9px 15px; background: var(--bg-light); border: 1px solid var(--border); border-radius: 18px; font-size: 13px; cursor: pointer; font-weight: 500; }
        .typing-indicator { display: none; padding: 13px 18px; background: white; border-radius: 18px; width: fit-content; box-shadow: 0 2px 6px rgba(0,0,0,0.08); }
        .typing-indicator.active { display: block; }
        .typing-dot { display: inline-block; width: 8px; height: 8px; margin-right: 5px; background: #a0aec0; border-radius: 50%; animation: typing 1.4s infinite; }
        @keyframes typing { 0%, 60%, 100% { transform: translateY(0); } 30% { transform: translateY(-9px); } }
        .chat-input-area { padding: 18px 20px; background: white; border-top: 1px solid var(--border); }
        .chat-input-wrapper { display: flex; gap: 10px; }
        .chat-input { flex: 1; padding: 13px 18px; border: 2px solid var(--border); border-radius: 22px; font-size: 14px; outline: none; }
        .chat-send-btn { padding: 13px 24px; background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%); color: white; border: none; border-radius: 22px; font-weight: 700; cursor: pointer; }
        .chat-send-btn:disabled { background: #cbd5e0; cursor: not-allowed; }
        .chat-disclaimer { padding: 14px; background: #fef3c7; border-left: 4px solid var(--accent); font-size: 12px; color: #78350f; margin-bottom: 18px; border-radius: 6px; }
        
        /* CALENDAR */
        .calendar-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.65); display: none; align-items: center; justify-content: center; z-index: 10000; padding: 20px; }
        .calendar-overlay.active { display: flex; }
        .calendar-modal { background: white; border-radius: 20px; width: 100%; max-width: 600px; max-height: 90vh; overflow-y: auto; box-shadow: 0 24px 72px rgba(0,0,0,0.35); }
        .calendar-header { background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%); color: white; padding: 28px; border-radius: 20px 20px 0 0; display: flex; justify-content: space-between; align-items: center; }
        .calendar-header h2 { font-size: 26px; font-weight: 700; }
        .calendar-close-btn { background: rgba(255,255,255,0.15); border: none; color: white; font-size: 26px; cursor: pointer; width: 44px; height: 44px; border-radius: 10px; }
        .calendar-body { padding: 32px; }
        .demo-notice { background: #fef3c7; border-left: 4px solid var(--accent); padding: 18px; margin-bottom: 28px; border-radius: 10px; color: #78350f; font-size: 14px; }
        .booking-confirmed { text-align: center; padding: 60px 40px; }
        .checkmark { width: 90px; height: 90px; background: linear-gradient(135deg, #10b981 0%, #059669 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 28px; font-size: 52px; color: white; }
        .booking-confirmed h3 { font-size: 30px; margin-bottom: 14px; font-weight: 700; }
        .booking-confirmed p { color: var(--text-light); margin-bottom: 10px; }
        .confirm-btn { padding: 16px 36px; background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%); color: white; border: none; border-radius: 10px; font-weight: 700; font-size: 16px; cursor: pointer; margin-top: 24px; }
    </style>
</head>
<body>
    <div class="demo-banner">üé® Demo Environment ‚Äî AI-Powered Chat Assistant</div>
    
    <header>
        <div class="header-content">
            <a href="#" class="logo"><div class="logo-icon"></div> Wellspring Health</a>
            <a href="https://renhealth.janeapp.com.au/" class="header-cta" target="_blank">Book Appointment</a>
        </div>
    </header>
    
    <section class="hero">
        <div class="hero-badge">Holistic Healthcare</div>
        <h1>Heal Naturally. <span class="hero-highlight">Live Better.</span></h1>
        <p>Evidence-based integrative care that addresses root causes, not just symptoms.</p>
        <a href="https://renhealth.janeapp.com.au/" class="hero-cta" target="_blank">Start Your Journey</a>
    </section>
    
    <section class="section section-alt">
        <h2>Therapeutic Services</h2>
        <div class="services-grid">
            <div class="service-card"><h3>Acupuncture</h3></div>
            <div class="service-card"><h3>Physiotherapy</h3></div>
            <div class="service-card"><h3>Chinese Herbal Medicine</h3></div>
            <div class="service-card"><h3>Lymphatic Drainage</h3></div>
            <div class="service-card"><h3>Craniosacral Therapy</h3></div>
            <div class="service-card"><h3>Remedial Massage</h3></div>
        </div>
    </section>
    
    <section class="philosophy-section">
        <div class="philosophy-quote">"Balance is the foundation of health."</div>
        <p style="max-width: 650px; margin: 0 auto; font-size: 17px; opacity: 0.95;">Your body has an innate ability to heal when given the right support. <strong>Homeostasis</strong> is essential for optimal function.</p>
    </section>
    
    <section class="section">
        <h2>Clinic Information</h2>
        <div class="info-grid">
            <div class="info-card">
                <h3>üìç Location</h3>
                <p><strong>Suite 4 / 8-10 Clarke St</strong><br>Earlwood NSW 2206</p>
                <p style="font-size: 14px;">Opposite Coles ‚Ä¢ Stairs access only</p>
            </div>
            <div class="info-card">
                <h3>üïí Hours</h3>
                <p><strong>Monday ‚Äì Saturday</strong><br>9:00am ‚Äì 6:00pm</p>
                <p><em>By appointment only</em></p>
            </div>
            <div class="info-card">
                <h3>üìû Contact</h3>
                <p><strong>Phone:</strong> <a href="tel:0433287229">0433 287 229</a></p>
                <p><strong>Email:</strong> <a href="mailto:info@renhealth.com.au">info@renhealth.com.au</a></p>
            </div>
        </div>
    </section>
    
    <footer>
        <p><strong>Acknowledgement of Country</strong><br>We acknowledge the Traditional Custodians of the land and pay our respects to Elders past, present and emerging.</p>
        <p style="margin-top: 20px; opacity: 0.7;">¬© 2024 Wellspring Health (Demo) ‚Ä¢ Created by Edge Studio</p>
    </footer>
    
    <!-- CHAT NOTIFICATION BUBBLE -->
    <div class="chat-notification" id="chatNotification">
        <div class="chat-notification-header">
            <div class="chat-notification-title">üí¨ Need help?</div>
            <button class="chat-notification-close" id="notificationClose">&times;</button>
        </div>
        <div class="chat-notification-body">
            Have questions about our services? I'm here to help!
        </div>
        <button class="chat-notification-btn" id="notificationChatBtn">Start Chat</button>
    </div>
    
    <!-- CHAT WIDGET -->
    <button class="chat-launcher" id="chatLauncher">
        <svg viewBox="0 0 24 24"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"/></svg>
    </button>
    
    <div class="chat-panel" id="chatPanel">
        <div class="chat-header">
            <div class="chat-header-info">
                <h3 style="font-size: 17px; font-weight: 700; margin-bottom: 4px;">Health Assistant</h3>
                <p style="font-size: 13px; opacity: 0.9;">Ask us anything</p>
            </div>
            <button class="chat-close" id="chatClose">&times;</button>
        </div>
        <div class="chat-messages" id="chatMessages">
            <div class="chat-disclaimer"><strong>‚ö†Ô∏è Demo:</strong> Not connected to real booking system.</div>
            <div class="chat-message bot">
                <div class="message-bubble">Hi! I'm here to help with questions about our holistic health services. How can I assist you?</div>
            </div>
        </div>
        <div class="quick-replies" id="quickReplies">
            <button class="quick-reply-btn" data-msg="What should I book for lower back pain?">What should I book for‚Ä¶</button>
            <button class="quick-reply-btn" data-msg="How much is an initial appointment?">Pricing & session length</button>
            <button class="quick-reply-btn" data-msg="Do you treat children?">Do you treat [condition]?</button>
        </div>
        <div class="chat-input-area">
            <div class="chat-input-wrapper">
                <input type="text" class="chat-input" id="chatInput" placeholder="Type your message..."/>
                <button class="chat-send-btn" id="chatSendBtn">Send</button>
            </div>
        </div>
    </div>
    
    <!-- CALENDAR MODAL -->
    <div class="calendar-overlay" id="calendarOverlay">
        <div class="calendar-modal">
            <div class="calendar-header">
                <h2>Book an Appointment</h2>
                <button class="calendar-close-btn" id="calendarCloseBtn">&times;</button>
            </div>
            <div class="calendar-body">
                <div class="demo-notice"><strong>üìÖ Demo Booking System</strong><br>This is a demonstration. No real appointments will be created.</div>
                <div class="booking-confirmed">
                    <div class="checkmark">‚úì</div>
                    <h3>Booking Simulation</h3>
                    <p>In a real system, you would select:</p>
                    <p>‚Ä¢ Service type<br>‚Ä¢ Date & time<br>‚Ä¢ Practitioner</p>
                    <p style="margin-top: 16px;">Then receive a confirmation email.</p>
                    <button class="confirm-btn" onclick="closeCalendar()">Close</button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        const API = 'https://edgestudio.app.n8n.cloud/webhook/clinic-chat';
        const SID = 'demo-' + Date.now();
        let history = '';
        let hasAutoOpened = false;
        
        const launcher = document.getElementById('chatLauncher');
        const panel = document.getElementById('chatPanel');
        const closeBtn = document.getElementById('chatClose');
        const msgs = document.getElementById('chatMessages');
        const input = document.getElementById('chatInput');
        const send = document.getElementById('chatSendBtn');
        const quick = document.getElementById('quickReplies');
        const calOverlay = document.getElementById('calendarOverlay');
        const calCloseBtn = document.getElementById('calendarCloseBtn');
        const notification = document.getElementById('chatNotification');
        const notificationClose = document.getElementById('notificationClose');
        const notificationChatBtn = document.getElementById('notificationChatBtn');
        
        // Detect mobile
        const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent) || window.innerWidth <= 768;
        
        // Auto-popup after 3 seconds
        setTimeout(() => {
            if (!hasAutoOpened) {
                if (isMobile) {
                    // On mobile: show notification bubble
                    notification.classList.add('show');
                    launcher.classList.add('pulse');
                } else {
                    // On desktop: open full chat
                    panel.classList.add('open');
                    launcher.classList.add('pulse');
                }
                hasAutoOpened = true;
            }
        }, 3000);
        
        // Notification close button
        notificationClose.onclick = () => {
            notification.classList.remove('show');
            launcher.classList.remove('pulse');
        };
        
        // Notification chat button
        notificationChatBtn.onclick = () => {
            notification.classList.remove('show');
            panel.classList.add('open');
            launcher.classList.remove('pulse');
            input.focus();
        };
        
        launcher.onclick = () => {
            notification.classList.remove('show');
            panel.classList.toggle('open');
            launcher.classList.remove('pulse');
            if (panel.classList.contains('open')) input.focus();
        };
        
        closeBtn.onclick = () => {
            panel.classList.remove('open');
        };
        
        send.onclick = () => sendMsg();
        input.onkeypress = e => { if (e.key === 'Enter') sendMsg(); };
        
        document.querySelectorAll('.quick-reply-btn').forEach(btn => {
            btn.onclick = () => {
                sendMsg(btn.dataset.msg);
                quick.style.display = 'none';
            };
        });
        
        calCloseBtn.onclick = () => calOverlay.classList.remove('active');
        calOverlay.onclick = (e) => { if (e.target === calOverlay) calOverlay.classList.remove('active'); };
        
        window.closeCalendar = () => calOverlay.classList.remove('active');
        window.openCalendar = () => calOverlay.classList.add('active');
        
        function addMsg(text, user = false, showBooking = false) {
            const div = document.createElement('div');
            div.className = `chat-message ${user ? 'user' : 'bot'}`;
            let html = text;
            if (showBooking) {
                html += '<br><br><button class="message-cta" onclick="openCalendar()">Book an Appointment</button>';
            }
            div.innerHTML = `<div class="message-bubble">${html}</div>`;
            msgs.appendChild(div);
            msgs.scrollTop = msgs.scrollHeight;
        }
        
        function showTyping() {
            const div = document.createElement('div');
            div.className = 'chat-message bot';
            div.id = 'typing';
            div.innerHTML = '<div class="typing-indicator active"><span class="typing-dot"></span><span class="typing-dot"></span><span class="typing-dot"></span></div>';
            msgs.appendChild(div);
            msgs.scrollTop = msgs.scrollHeight;
        }
        
        function hideTyping() {
            const t = document.getElementById('typing');
            if (t) t.remove();
        }
        
        async function sendMsg(txt = null) {
            const msg = txt || input.value.trim();
            if (!msg) return;
            
            addMsg(msg, true);
            input.value = '';
            send.disabled = true;
            input.disabled = true;
            showTyping();
            
            try {
                const res = await fetch(API, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        session_id: SID,
                        user_message: msg,
                        history: history
                    })
                });
                
                const data = await res.json();
                history += `User: ${msg}\nAssistant: ${data.reply}\n`;
                hideTyping();
                addMsg(data.reply, false, data.booking_action);
            } catch (err) {
                hideTyping();
                addMsg('Sorry, error occurred. Please call 0433 287 229.', false);
                console.error(err);
            } finally {
                send.disabled = false;
                input.disabled = false;
                input.focus();
            }
        }
    </script>
</body>
</html>

